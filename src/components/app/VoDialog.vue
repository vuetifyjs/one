<template>
  <v-dialog
    v-model="model"
    :fullscreen="display.xs.value"
    :max-height="display.xs.value ? '100%' : 800"
    :max-width="display.xs.value ? '100%' : 800"
    activator="parent"
    height="100%"
  >
    <template #default="{ isActive }">
      <v-card
        :prepend-icon="prependIcon"
        :title="title"
        class="overflow-hidden"
        height="inherit"
      >
        <template v-if="$slots.prepend" #prepend>
          <slot name="prepend" />
        </template>

        <v-divider class="mt-4" />

        <slot />

        <template #append>
          <slot name="append" />

          <v-btn
            density="comfortable"
            icon="$close"
            size="small"
            variant="text"
            @click="model = !model"
          />
        </template>

        <template v-if="$slots.actions" #actions>
          <slot :is-active="isActive" name="actions" />
        </template>
      </v-card>
    </template>
  </v-dialog>
</template>

<script lang="ts" setup>
  interface Props {
    prependIcon: string
    title: string
  }

  defineProps<Props>()

  const model = defineModel('modelValue', { type: Boolean })
  const display = useDisplay()
</script>
